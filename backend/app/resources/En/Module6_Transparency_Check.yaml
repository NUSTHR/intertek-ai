module_id: 6
title: "Transparency Obligation Check"
description: "Determines if the AI system triggers specific transparency obligations under Article 50 of the EU AI Act (Interaction, Synthetic Content, Emotion/Biometric, Deep Fakes)."

questions:
  # =========================================================================
  # GATEWAY QUESTION (High-level Trigger Identification)
  # =========================================================================
  - id: "q6.gateway"
    text: "Which of the following functions or scenarios applies to your AI system?"
    ref: "Art 50"
    description: "Select all that apply to determine which specific transparency obligations might be triggered."
    type: "multi_choice"
    options:
      - label: "Direct Interaction: The system is intended to interact directly with natural persons (e.g., chatbots)."
        value: 1
      - label: "Synthetic Content Generation: The system generates synthetic audio, image, video, or text content."
        value: 2
      - label: "Biometric/Emotion Analysis (Not limited to sensitive traits) : The system is an emotion recognition system or a biometric categorisation system."
        value: 3
      - label: "Content Publication (Deep Fakes / Public Interest Text): The system generates 'deep fakes' or text informing the public on matters of public interest."
        value: 4
      - label: "None of the above"
        value: 0
        exclusive: true

  # =========================================================================
  # TRACK A: Direct Interaction (Article 50(1))
  # Role: Provider
  # =========================================================================
  - id: "q6.a.1"
    text: "Is the AI nature of the interaction obvious to a reasonably well-informed, observant, and circumspect person given the context?"
    ref: "Art 50(1)"
    description: "If the interaction is obviously AI-driven from the context, the specific obligation to inform the user does not apply."
    type: "single_choice"
    dependency: "q6.gateway contains 1"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  - id: "q6.a.2"
    text: "Is the AI system authorised by law to detect, prevent, investigate or prosecute criminal offences?"
    ref: "Art 50(1)"
    description: "Law enforcement uses are exempt unless the system is for the public to report crimes."
    type: "single_choice"
    dependency: "q6.gateway contains 1 and q6.a.1 == False"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  - id: "q6.a.3"
    text: "Is the AI system available for the public to report a criminal offence?"
    ref: "Art 50(1)"
    description: "If Yes, transparency applies even if authorised for law enforcement."
    type: "single_choice"
    dependency: "q6.a.2 == True"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  # =========================================================================
  # TRACK B: Synthetic Content Generation - Marking (Article 50(2))
  # Role: Provider
  # =========================================================================
  - id: "q6.b.1"
    text: "Does the system perform ONLY an assistive function for standard editing or minor alteration?"
    ref: "Art 50(2)"
    description: "If the system does not substantially alter the input data or its semantics, the marking obligation does not apply."
    type: "single_choice"
    dependency: "q6.gateway contains 2"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  - id: "q6.b.2"
    text: "Is the AI system authorised by law to detect, prevent, investigate or prosecute criminal offences?"
    ref: "Art 50(2)"
    type: "single_choice"
    dependency: "q6.gateway contains 2 and q6.b.1 == False"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  # =========================================================================
  # TRACK C: Emotion Recognition & Biometric Categorization (Article 50(3))
  # Role: Deployer
  # =========================================================================
  - id: "q6.c.1"
    text: "Is the use permitted by law to detect, prevent or investigate criminal offences?"
    ref: "Art 50(3)"
    type: "single_choice"
    dependency: "q6.gateway contains 3"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  # =========================================================================
  # TRACK D: Content Publication (Deep Fakes & Public Text) (Article 50(4))
  # Role: Deployer
  # =========================================================================
  
  # --- Scenario D1: Deep Fakes ---
  - id: "q6.d.1"
    text: "Does the system generate/manipulate content that resembles existing persons/objects/events and would falsely appear to be authentic ('Deep Fake')?"
    ref: "Art 50(4); Art 3(60)"
    type: "single_choice"
    dependency: "q6.gateway contains 4"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  - id: "q6.d.2"
    text: "Is the use authorised by law to detect, prevent, investigate or prosecute criminal offences?"
    ref: "Art 50(4)"
    type: "single_choice"
    dependency: "q6.d.1 == True"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  - id: "q6.d.3"
    text: "Does the content form part of an evidently artistic, creative, satirical, fictional or analogous work?"
    ref: "Art 50(4)"
    description: "If Yes, the disclosure obligation is modified (limited to disclosing existence of the content)."
    type: "single_choice"
    dependency: "q6.d.1 == True and q6.d.2 == False"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  # --- Scenario D2: Public Interest Text ---
  - id: "q6.d.4"
    text: "Does the system generate text published to inform the public on matters of public interest?"
    ref: "Art 50(4)"
    type: "single_choice"
    dependency: "q6.gateway contains 4 and q6.d.1 == False" # Logic flows to D2 if D1 is False, or treat as parallel check if gateway implies 'OR'
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  - id: "q6.d.5"
    text: "Is the use authorised by law to detect, prevent, investigate or prosecute criminal offences?"
    ref: "Art 50(4)"
    type: "single_choice"
    dependency: "q6.d.4 == True"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  - id: "q6.d.6"
    text: "Has the content undergone human review/editorial control, AND does a person hold editorial responsibility for it?"
    ref: "Art 50(4)"
    type: "single_choice"
    dependency: "q6.d.4 == True and q6.d.5 == False"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

variables:
  - name: "Transparency_obligation"
    type: "boolean"
    initial_value: False
    rules:
      # Track A: Gateway=1 AND Not Obvious AND NOT(Law Enf exempt)
      - condition: "q6.gateway contains 1 and q6.a.1 == False and not (q6.a.2 == True and q6.a.3 == False)"
        value: True
      
      # Track B: Gateway=2 AND Not Assistive AND NOT(Law Enf exempt)
      - condition: "q6.gateway contains 2 and q6.b.1 == False and q6.b.2 == False"
        value: True
      
      # Track C: Gateway=3 AND NOT(Law Enf exempt)
      - condition: "q6.gateway contains 3 and q6.c.1 == False"
        value: True

      # Track D1: Deep Fakes AND NOT(Law Enf exempt) -> (Artistic applies limited obligation, still counts as obligation apply)
      - condition: "q6.d.1 == True and q6.d.2 == False"
        value: True

      # Track D2: Public Text AND NOT(Law Enf exempt) AND NOT(Human Review)
      - condition: "q6.d.4 == True and q6.d.5 == False and q6.d.6 == False"
        value: True

      - condition: "else"
        value: False

  - name: "Transparency_Details"
    type: "list"
    initial_value: []
    description: "Collects all reasons for transparency obligations."
    rules:
      # 1. Interaction
      - condition: "q6.gateway contains 1 and q6.a.1 == False and not (q6.a.2 == True and q6.a.3 == False)"
        value: "Art 50(1): Obligation to inform natural persons they are interacting with an AI system."

      # 2. Synthetic Content Marking
      - condition: "q6.gateway contains 2 and q6.b.1 == False and q6.b.2 == False"
        value: "Art 50(2): Obligation to mark outputs as artificially generated/manipulated in a machine-readable format."

      # 3. Emotion/Biometric
      - condition: "q6.gateway contains 3 and q6.c.1 == False"
        value: "Art 50(3): Obligation to inform natural persons exposed to emotion recognition or biometric categorisation."

      # 4a. Deep Fake (Standard)
      - condition: "q6.d.1 == True and q6.d.2 == False and q6.d.3 == False"
        value: "Art 50(4): Obligation to disclose that the content has been artificially generated or manipulated."

      # 4b. Deep Fake (Artistic Exemption)
      - condition: "q6.d.1 == True and q6.d.2 == False and q6.d.3 == True"
        value: "Art 50(4): Limited obligation to disclose existence of generated content (Artistic/Creative exemption)."

      # 5. Public Interest Text
      - condition: "q6.d.4 == True and q6.d.5 == False and q6.d.6 == False"
        value: "Art 50(4): Obligation to disclose that the text has been artificially generated or manipulated."

router:
  - condition: "True"
    action: "jump"
    target_module_id: 8
