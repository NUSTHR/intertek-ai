module_id: 2 #"02_classification_and_roles"
title: "Classification & Role Identification"
description: "Determines the regulatory nature of the product and the entity's legal role based on Article 3 definitions."

questions:
  # --- Part 1: Classification (AI System vs GPAI vs Non-AI) ---
  - id: "q2.1"
    text: "How would you classify the nature of the product?"
    ref: "Art 3(1), Art 3(63)"
    type: "single_choice"
    options:
      - label: "General-Purpose AI Model (GPAI)"
        value: 1
        description: "A model that displays significant generality and is capable of competently performing a wide range of distinct tasks (e.g., large language models)."
      - label: "AI System"
        value: 2
        description: "A machine-based system designed to operate with varying levels of autonomy that infers how to generate outputs (predictions, content, recommendations, or decisions)."
      - label: "Non-AI or Non-General-Purpose AI Model"
        value: 3
        description: "Software that does not meet the legal definition of an AI system (e.g., simple rule-based systems without inference or autonomy)."
      - label: "Uncertain"
        value: 4

  - id: "q2.1a"
    text: "Which of the following descriptions best fits the product?"
    type: "single_choice"
    dependency: "q2.1 == 4"
    options:
      - label: "A model trained on data that is capable of being incorporated into various downstream AI systems or applications"
        value: 1
      - label: "A complete system, potentially integrating multiple models, designed for a specific intended purpose with varying levels of autonomy"
        value: 2
      - label: "None of above"
        value: 0

  - id: "q2.1b"
    text: "Does it display significant generality and is it capable of competently performing a wide range of distinct tasks?"
    ref: "Art 3(63)"
    type: "single_choice"
    dependency: "q2.1 == 4 and q2.1a == 1"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

  # --- Part 2: Role Identification (Conditioned on Part 1 results) ---
  
  # Scenario A: If classified as AI System -> Ask Full Role List
  - id: "q2.2a"
    text: "What is your entity's role regarding the AI System?"
    ref: "Art 3"
    type: "single_choice"
    # Logic: Direct AI System selection OR Uncertain -> System classification
    dependency: "q2.1 == 2 or (q2.1 == 4 and q2.1a == 2)"
    options:
      - label: "Provider"
        value: 1
        description: "You developed the AI system or have it developed and market it under your own name or trademark[cite: 67]."
      - label: "Deployer"
        value: 2
        description: "You use the AI system under your authority in a professional capacity[cite: 68]."
      - label: "Importer"
        value: 3
        description: "You are established in the EU and place an AI system from a third country on the Union market[cite: 70]."
      - label: "Distributor"
        value: 4
        description: "You are in the supply chain (other than provider/importer) making an AI system available on the Union market[cite: 71]."
      - label: "Authorized Representative"
        value: 5
        description: "You have a written mandate from a non-EU provider to act on their behalf[cite: 69]."
      - label: "Product Manufacturer"
        value: 6
        description: "You integrate an AI system into a product under your name/trademark[cite: 43]."
      - label: "None of the above"
        value: 0
        description: "None of the above roles apply"

  # Scenario B: If classified as GPAI -> Ask Limited Role List
  - id: "q2.2b"
    text: "What is your entity's role regarding the General-Purpose AI Model?"
    ref: "Art 3"
    type: "single_choice"
    # Logic: Direct GPAI selection OR Uncertain -> GPAI classification
    dependency: "q2.1 == 1 or (q2.1 == 4 and q2.1a == 1 and q2.1b == True)"
    options:
      - label: "Provider"
        value: 1
        description: "You developed the GPAI model or have it developed and market it under your own name or trademark[cite: 67]."
      - label: "Authorized Representative"
        value: 5
        description: "You have a written mandate from a non-EU provider to act on their behalf[cite: 69]."
      - label: "None of the above"
        value: 0
        description: "Other roles (e.g., pure downstream integrator) are not primary subjects for GPAI model regulation here."

variables:
  # 1. Determine AI Type
  - name: "AI_type"
    type: "integer"
    initial_value: 3
    rules:
      - condition: "q2.1 == 1"
        value: 1
      - condition: "q2.1 == 2"
        value: 2
      - condition: "q2.1 == 3"
        value: 3
      - condition: "q2.1 == 4 and q2.1a == 2"
        value: 2
      - condition: "q2.1 == 4 and q2.1a == 1 and q2.1b == True"
        value: 1
      - condition: "else"
        value: 3

  # 2. Determine Role String (Maps answers from either q2.2a or q2.2b to a unified variable)
  - name: "Role"
    type: "string"
    initial_value: "Unregulated"
    rules:
      - condition: "q2.2a == 1 or q2.2b == 1"
        value: "provider"
      - condition: "q2.2a == 2"
        value: "deployer"
      - condition: "q2.2a == 3"
        value: "importer"
      - condition: "q2.2a == 4"
        value: "distributor"
      - condition: "q2.2a == 5 or q2.2b == 5"
        value: "authorized_representative"
      - condition: "q2.2a == 6"
        value: "product_manufacturer"
      - condition: "else"
        value: "Unregulated"

router:
  # 1. Termination: Not AI
  - condition: "AI_type == 3"
    #"Module 9 (Not AI)" #"The product does not meet the criteria of an AI system or GPAI model under the Act."
    action: "jump"
    target_module_id: 9 

  # 2. Termination: No Applicable Role
  - condition: "Role == 'none'"
    #"Based on your inputs, your entity does not hold a regulated role under the AI Act for this product."
    action: "jump"
    target_module_id: 9

  # 3. Path for AI Systems -> System Exclusion Check
  - condition: "AI_type == 2"
    action: "jump"
    target_module_id: 3 #"Module 3 (System Exclusion Check)"

  # 4. Path for GPAI Models -> Systematic Risk Check
  - condition: "AI_type == 1"
    action: "jump"
    target_module_id: 7 #"Module 7 (GPAI Systematic Risk Check)"