module_id: 1 #"01_scope_and_exclusions"
title: "Scope & Universal R&D Exclusions"
description: "Determines if the AI is outside the legal scope based on Article 2 exclusions for R&D."

# 1. QUESTIONS SECTION
questions:
  - id: "q1.1"
    text: "Which of the following descriptions best applies to your product or activity?"
    ref: "Art 2(6), Art 2(8)"
    type: "single_choice"
    options:
      # Value 1: Scientific R&D exclusion (Art 2(6))
      - label: "It is specifically developed and put into service for the sole purpose of scientific research and development."
        value: 1
      # Value 2: Pre-market R&D exclusion (Art 2(8))
      - label: "It is a research, testing, or development activity occurring prior to being placed on the market or put into service."
        value: 2
      # Value 0: None (In-scope)
      - label: "None of the above (e.g., intended for commercial use, public service, or already on the market)."
        value: 0

  - id: "q1.2"
    text: "Does this activity involve testing in real-world conditions?"
    ref: "Art 2(9)"
    type: "single_choice"
    # Only ask if User selected "Pre-market R&D" (Value 2)
    # Scientific R&D (Value 1) is unconditionally excluded per Art 2(6).
    dependency: "q1.1 == 2"
    options:
      - label: "Yes"
        value: True
      - label: "No"
        value: False

# 2. LOGIC SECTION
variables:
  - name: "Totally_excluded"
    type: "boolean"
    initial_value: False
    rules:
      # Scenario A: Scientific R&D (Art 2(6)) -> Excluded
      - condition: "q1.1 == 1"
        value: True
      # Scenario B: Pre-market R&D (Art 2(8)) AND NOT Real-world testing (Art 2(9)) -> Excluded
      - condition: "q1.1 == 2 and q1.2 == False"
        value: True
      # Scenario C: Real-world testing (2 + True) OR None (0) -> In Scope
      - condition: "else"
        value: False

  - name: "Real_world_Testing"
    type: "boolean"
    initial_value: False
    rules:
      - condition: "q1.1 == 2 and q1.2 == True"
        value: True
      - condition: "else"
        value: False

  - name: "Exclusion_reason"
    type: "string"
    initial_value: ""
    rules:
      - condition: "q1.1 == 1"
        value: "Scientific Research and Development (Art 2(6))"
      - condition: "q1.1 == 2 and q1.2 == False"
        value: "Pre-market R&D without real-world testing (Art 2(8))"
      - condition: "else"
        value: "None / In-Scope"

# 3. ROUTER SECTION
router:
  - condition: "Totally_excluded == True"
    action: "jump"
    target_module_id: 9 #"Module 9"

  - condition: "Totally_excluded == False"
    action: "jump"
    target_module_id: 2 #"Module 2"