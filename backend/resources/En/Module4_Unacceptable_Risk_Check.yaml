module: "04_unacceptable_risk_check"
title: "Unacceptable Risk Check"
description: "Screens for prohibited AI practices as strictly defined in Article 5 of Regulation (EU) 2024/1689."

questions:
  - id: "q4.1"
    text: "Which of the following categories best describes the AI system's practice?"
    ref: "Art 5"
    type: "multi_choice"
    options:
      - label: "Use of subliminal, manipulative, or deceptive techniques"
        value: "manipulative"
      - label: "Exploitation of vulnerabilities of specific groups"
        value: "vulnerability"
      - label: "Social scoring or evaluation of trustworthiness"
        value: "social_scoring"
      - label: "Risk assessment for criminal offenses (Predictive Policing)"
        value: "predictive_policing"
      - label: "Scraping of facial images for databases"
        value: "facial_scraping"
      - label: "Emotion recognition in workplace or education"
        value: "emotion_recognition"
      - label: "Biometric categorization of sensitive traits"
        value: "biometric_categorization"
      - label: "Real-time remote biometric identification (RBI)"
        value: "real_time_rbi"
      - label: "None of the above"
        value: "none"
        exclusive: true

  # -------------------------------------------------------------------------
  # 1. MANIPULATIVE TECHNIQUES [Article 5(1)(a)]
  # -------------------------------------------------------------------------
  - id: "q4.1_a"
    text: "Does the system deploy subliminal techniques beyond a personâ€™s consciousness OR purposefully manipulative or deceptive techniques?"
    ref: "Art 5(1)(a)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1 contains 'manipulative'"

  - id: "q4.1_b"
    text: "Is the objective or the effect of these techniques to materially distort the behaviour of a person or a group of persons by appreciably impairing their ability to make an informed decision?"
    ref: "Art 5(1)(a)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1_a == 'yes'"

  - id: "q4.1_c"
    text: "Does this distortion cause the person to take a decision that they would not have otherwise taken?"
    ref: "Art 5(1)(a)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1_b == 'yes'"

  - id: "q4.1_d"
    text: "Does taking that decision cause, or is it reasonably likely to cause, significant harm to that person, another person, or a group of persons?"
    ref: "Art 5(1)(a)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1_c == 'yes'"

  # -------------------------------------------------------------------------
  # 2. EXPLOITATION OF VULNERABILITIES [Article 5(1)(b)]
  # -------------------------------------------------------------------------
  - id: "q4.2_a"
    text: "Does the system exploit vulnerabilities of a natural person or specific group due to their age, disability, or a specific social or economic situation?"
    ref: "Art 5(1)(b)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1 contains 'vulnerability'"

  - id: "q4.2_b"
    text: "Is the objective or effect to materially distort the behaviour of that person or a person belonging to that group?"
    ref: "Art 5(1)(b)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.2_a == 'yes'"

  - id: "q4.2_c"
    text: "Does this distortion cause, or is it reasonably likely to cause, significant harm to that person or another person?"
    ref: "Art 5(1)(b)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.2_b == 'yes'"

  # -------------------------------------------------------------------------
  # 3. SOCIAL SCORING [Article 5(1)(c)]
  # -------------------------------------------------------------------------
  - id: "q4.3_a"
    text: "Does the system evaluate or classify natural persons or groups over a period of time based on their social behaviour or known, inferred, or predicted personal/personality characteristics?"
    ref: "Art 5(1)(c)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1 contains 'social_scoring'"

  - id: "q4.3_b"
    text: "Does this social score lead to detrimental or unfavourable treatment in social contexts that are UNRELATED to the contexts in which the data was originally generated or collected?"
    ref: "Art 5(1)(c)(i)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.3_a == 'yes'"

  - id: "q4.3_c"
    text: "Does this social score lead to detrimental or unfavourable treatment that is unjustified or disproportionate to the social behaviour or its gravity?"
    ref: "Art 5(1)(c)(ii)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.3_a == 'yes'"

  # -------------------------------------------------------------------------
  # 4. PREDICTIVE POLICING [Article 5(1)(d)]
  # -------------------------------------------------------------------------
  - id: "q4.4_a"
    text: "Is the system used for making risk assessments of natural persons to assess or predict the risk of them committing a criminal offense?"
    ref: "Art 5(1)(d)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1 contains 'predictive_policing'"

  - id: "q4.4_b"
    text: "Is this assessment based SOLELY on the profiling of a natural person or on assessing their personality traits and characteristics?"
    ref: "Art 5(1)(d)"
    type: "single_choice"
    options:
      - label: "Yes, Based solely on profiling"
        value: "yes"
      - label: "No, It supports human assessment based on objective/verifiable facts"
        value: "no"
    dependency: "q4.4_a == 'yes'"

  # -------------------------------------------------------------------------
  # 5. FACIAL SCRAPING [Article 5(1)(e)]
  # -------------------------------------------------------------------------
  - id: "q4.5_a"
    text: "Does the system create or expand facial recognition databases?"
    ref: "Art 5(1)(e)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1 contains 'facial_scraping'"

  - id: "q4.5_b"
    text: "Is this achieved through the UNTARGETED scraping of facial images from the internet or CCTV footage?"
    ref: "Art 5(1)(e)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.5_a == 'yes'"

  # -------------------------------------------------------------------------
  # 6. EMOTION RECOGNITION [Article 5(1)(f)]
  # -------------------------------------------------------------------------
  - id: "q4.6_a"
    text: "Is the system used to infer emotions of a natural person?"
    ref: "Art 5(1)(f)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1 contains 'emotion_recognition'"

  - id: "q4.6_b"
    text: "Is the system intended to be put in place for medical or safety reasons?"
    ref: "Art 5(1)(f)"
    type: "single_choice"
    options:
      - label: "Yes (Exempt)"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.6_a == 'yes'"

  # -------------------------------------------------------------------------
  # 7. BIOMETRIC CATEGORIZATION [Article 5(1)(g)]
  # -------------------------------------------------------------------------
  - id: "q4.7_a"
    text: "Does the system categorise individually natural persons based on their biometric data?"
    ref: "Art 5(1)(g)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1 contains 'biometric_categorization'"

  - id: "q4.7_b"
    text: "Is the purpose to deduce or infer their race, political opinions, trade union membership, religious or philosophical beliefs, sex life, or sexual orientation?"
    ref: "Art 5(1)(g)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.7_a == 'yes'"

  - id: "q4.7_c"
    text: "Is this strictly for the labelling or filtering of lawfully acquired biometric datasets in the area of law enforcement?"
    ref: "Art 5(1)(g)"
    type: "single_choice"
    options:
      - label: "Yes (Exempt)"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.7_b == 'yes'"

  # -------------------------------------------------------------------------
  # 8. REAL-TIME RBI [Article 5(1)(h)]
  # -------------------------------------------------------------------------
  - id: "q4.8_a"
    text: "Is the system a 'real-time' remote biometric identification system used in publicly accessible spaces?"
    ref: "Art 5(1)(h)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.1 contains 'real_time_rbi'"

  - id: "q4.8_b"
    text: "Is it used for the purposes of law enforcement?"
    ref: "Art 5(1)(h)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No (If private/non-LE, proceed to High-Risk)"
        value: "no"
    dependency: "q4.8_a == 'yes'"

  - id: "q4.8_c"
    text: "Is the use strictly necessary for: (i) searching for victims/missing persons, (ii) preventing imminent threat to life/terrorism, or (iii) identifying suspects of serious crimes (Annex II)?"
    ref: "Art 5(1)(h)(i)-(iii)"
    type: "single_choice"
    options:
      - label: "Yes"
        value: "yes"
      - label: "No"
        value: "no"
    dependency: "q4.8_b == 'yes'"

# Internal Logical Mapping & Parameter State
parameter_updates:
  - parameter: "Unacceptable_risk"
    type: "boolean"
    logic: |
      # 1. Manipulative: PROHIBITED if all steps are YES
      IF (q4.1_a == "yes" AND q4.1_b == "yes" AND q4.1_c == "yes" AND q4.1_d == "yes"): SET True
      
      # 2. Vulnerability: PROHIBITED if all steps are YES
      ELSE IF (q4.2_a == "yes" AND q4.2_b == "yes" AND q4.2_c == "yes"): SET True
      
      # 3. Social Scoring: PROHIBITED if (a=Yes) AND (b=Yes OR c=Yes)
      ELSE IF (q4.3_a == "yes" AND (q4.3_b == "yes" OR q4.3_c == "yes")): SET True
      
      # 4. Predictive Policing: PROHIBITED if (a=Yes) AND (b=Yes [Based solely on profiling])
      ELSE IF (q4.4_a == "yes" AND q4.4_b == "yes"): SET True
      
      # 5. Facial Scraping: PROHIBITED if (a=Yes) AND (b=Yes)
      ELSE IF (q4.5_a == "yes" AND q4.5_b == "yes"): SET True
      
      # 6. Emotion Recognition: PROHIBITED if (a=Yes) AND (c=No [Not for safety])
      # LOGIC UPDATED: Removed check for q4.6_b (workplace/education)
      ELSE IF (q4.6_a == "yes" AND q4.6_b == "no"): SET True
      
      # 7. Biometric Categorization: PROHIBITED if (a=Yes) AND (b=Yes) AND (c=No [Not for LE filtering])
      ELSE IF (q4.7_a == "yes" AND q4.7_b == "yes" AND q4.7_c == "no"): SET True
      
      # 8. Real-time RBI: PROHIBITED if (a=Yes) AND (b=Yes) AND (c=No [Not for valid exception])
      ELSE IF (q4.8_a == "yes" AND q4.8_b == "yes" AND q4.8_c == "no"): SET True
      
      # Default
      ELSE: SET False

  - parameter: "Prohibited_reason"
    type: "string"
    logic: |
      IF (Unacceptable_risk == True AND q4.1 contains "manipulative"): SET "Manipulative techniques causing harm (Art 5(1)(a))"
      ELSE IF (Unacceptable_risk == True AND q4.1 contains "vulnerability"): SET "Exploitation of vulnerabilities causing harm (Art 5(1)(b))"
      ELSE IF (Unacceptable_risk == True AND q4.1 contains "social_scoring"): SET "Social Scoring (Art 5(1)(c))"
      ELSE IF (Unacceptable_risk == True AND q4.1 contains "predictive_policing"): SET "Predictive Policing based solely on profiling (Art 5(1)(d))"
      ELSE IF (Unacceptable_risk == True AND q4.1 contains "facial_scraping"): SET "Untargeted Facial Scraping (Art 5(1)(e))"
      ELSE IF (Unacceptable_risk == True AND q4.1 contains "emotion_recognition"): SET "Emotion Recognition in workplace/schools (Art 5(1)(f))"
      ELSE IF (Unacceptable_risk == True AND q4.1 contains "biometric_categorization"): SET "Biometric Categorization of sensitive traits (Art 5(1)(g))"
      ELSE IF (Unacceptable_risk == True AND q4.1 contains "real_time_rbi"): SET "Real-time RBI in public spaces (Art 5(1)(h))"
      ELSE: SET "N/A"

router:
  - if: "Unacceptable_risk == True"
    action: "END & Generate Result (Prohibited)"
  - if: "Unacceptable_risk == False"
    action: "Go to Module 5 (High-Risk AI System Check)"