obligations_matrix:

  # ==========================================
  # 1. GPAI WITH SYSTEMIC RISK
  # ==========================================
  - role_id: "provider"
    product_id: "gpai_systemic_risk"
    key_obligations:
      - "Model Evaluation: Perform model evaluation, including adversarial testing ('red-teaming'). (Art. 55(1)(a))"
      - "Systemic Risk Assessment: Assess and mitigate systemic risks at the Union level. (Art. 55(1)(b))"
      - "Incident Reporting: Report serious incidents to the AI Office. (Art. 55(1)(b))"
      - "Cybersecurity: Ensure adequate cybersecurity protection for the infrastructure and model. (Art. 55(1)(c))"
  - role_id: "deployer"
    product_id: "gpai_systemic_risk"
    key_obligations: []
  - role_id: "importer"
    product_id: "gpai_systemic_risk"
    key_obligations:
      - "Verification: Verify provider has fulfilled Art 53 and 55 obligations. (Art. 54)"
      - "Documentation: Keep technical documentation available for the AI Office. (Art. 54)"
      - "Identification: Indicate name and contact address on the model/packaging. (Art. 54)"
  - role_id: "distributor"
    product_id: "gpai_systemic_risk"
    key_obligations:
      - "Verification: Verify provider/importer identity and documentation. (Art. 54)"
      - "Conditions: Ensure storage/transport does not compromise compliance. (Art. 54)"
  - role_id: "product_manufacturer"
    product_id: "gpai_systemic_risk"
    key_obligations:
      - "Provider Obligations: If marketing under own name, assume provider obligations. (Art. 25)"
  - role_id: "authorised_representative"
    product_id: "gpai_systemic_risk"
    key_obligations:
      - "Mandate: Perform tasks specified in the mandate from the provider. (Art. 22)"
      - "Cooperation: Cooperate with the AI Office and competent authorities. (Art. 22)"

  # ==========================================
  # 2. GPAI (STANDARD)
  # ==========================================
  - role_id: "provider"
    product_id: "gpai_standard"
    key_obligations:
      - "Technical Documentation: Maintain documentation aimed at authorities (Annex XI). (Art. 53(1)(a))"
      - "Downstream Info: Provide information to downstream providers to enable compliance. (Art. 53(1)(b))"
      - "Copyright Policy: Implement policy to respect Union copyright law. (Art. 53(1)(c))"
      - "Training Summary: Publish a detailed summary of content used for training. (Art. 53(1)(d))"
  - role_id: "deployer"
    product_id: "gpai_standard"
    key_obligations: []
  - role_id: "importer"
    product_id: "gpai_standard"
    key_obligations:
      - "Verification: Verify provider obligations under Art 53. (Art. 54)"
      - "Identification: Indicate name and contact address. (Art. 54)"
  - role_id: "distributor"
    product_id: "gpai_standard"
    key_obligations:
      - "Verification: Verify provider/importer identity. (Art. 54)"
      - "Risk Reporting: Report risks to provider/importer. (Art. 54)"
  - role_id: "product_manufacturer"
    product_id: "gpai_standard"
    key_obligations:
      - "Provider Obligations: If marketing under own name, assume provider obligations. (Art. 25)"
  - role_id: "authorised_representative"
    product_id: "gpai_standard"
    key_obligations:
      - "Mandate: Verify technical documentation exists. (Art. 22)"

  # ==========================================
  # 3. GPAI (OPEN SOURCE)
  # ==========================================
  - role_id: "provider"
    product_id: "gpai_open_source"
    key_obligations:
      - "Copyright Policy: Implement policy to respect Union copyright law. (Art. 53(1)(c))"
      - "Training Summary: Publish a detailed summary of content used for training. (Art. 53(1)(d))"
  - role_id: "deployer"
    product_id: "gpai_open_source"
    key_obligations: []
  - role_id: "importer"
    product_id: "gpai_open_source"
    key_obligations: []
  - role_id: "distributor"
    product_id: "gpai_open_source"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "gpai_open_source"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "gpai_open_source"
    key_obligations: []

  # ==========================================
  # 4. HIGH RISK (ANNEX I)
  # ==========================================
  - role_id: "provider"
    product_id: "high_risk_annex1"
    key_obligations:
      - "Risk Management: Establish and maintain a risk management system. (Art. 9)"
      - "Data Governance: Ensure training/validation data meets quality criteria. (Art. 10)"
      - "Technical Documentation: Draw up documentation before placing on market. (Art. 11)"
      - "Human Oversight: Design system for effective oversight (stop buttons). (Art. 14)"
      - "QMS: Implement a Quality Management System. (Art. 17)"
      - "Conformity Assessment: Undergo assessment (CE Marking). (Art. 43)"
  - role_id: "deployer"
    product_id: "high_risk_annex1"
    key_obligations:
      - "Instruction Adherence: Use system according to instructions. (Art. 26(1))"
      - "Human Oversight: Assign competent persons to oversee system. (Art. 26(2))"
      - "Input Data: Ensure input data is relevant and representative. (Art. 26(4))"
      - "Monitoring: Monitor for anomalies/incidents. (Art. 26(5))"
  - role_id: "importer"
    product_id: "high_risk_annex1"
    key_obligations:
      - "Conformity Check: Ensure conformity assessment is done by provider. (Art. 23)"
      - "Labeling: Add importer name/address to product. (Art. 23)"
  - role_id: "distributor"
    product_id: "high_risk_annex1"
    key_obligations:
      - "CE Check: Verify CE marking and Declaration of Conformity. (Art. 24)"
      - "Instructions: Verify instructions for use are present. (Art. 24)"
  - role_id: "product_manufacturer"
    product_id: "high_risk_annex1"
    key_obligations:
      - "Provider Obligations: Assume all provider obligations if marketing under own name. (Art. 25)"
  - role_id: "authorised_representative"
    product_id: "high_risk_annex1"
    key_obligations:
      - "Documentation: Keep EU declaration of conformity and tech docs for 10 years. (Art. 22)"
      - "Cooperation: Cooperate with national competent authorities. (Art. 22)"

  # ==========================================
  # 5. HIGH RISK (ANNEX III)
  # ==========================================
  - role_id: "provider"
    product_id: "high_risk_annex3"
    key_obligations:
      - "Risk Management: Establish and maintain a risk management system. (Art. 9)"
      - "Data Governance: Ensure training/validation data meets quality criteria. (Art. 10)"
      - "Technical Documentation: Draw up documentation. (Art. 11)"
      - "Human Oversight: Design system for effective oversight. (Art. 14)"
      - "QMS: Implement a Quality Management System. (Art. 17)"
      - "Registration: Register in the EU database. (Art. 49)"
  - role_id: "deployer"
    product_id: "high_risk_annex3"
    key_obligations:
      - "Instruction Adherence: Use system according to instructions. (Art. 26(1))"
      - "Human Oversight: Assign competent persons to oversee system. (Art. 26(2))"
      - "FRIA: Perform Fundamental Rights Impact Assessment (Public/Essential entities). (Art. 27)"
  - role_id: "importer"
    product_id: "high_risk_annex3"
    key_obligations:
      - "Conformity Check: Ensure provider carried out assessment. (Art. 23)"
      - "Labeling: Add importer name/address. (Art. 23)"
  - role_id: "distributor"
    product_id: "high_risk_annex3"
    key_obligations:
      - "CE Check: Verify CE marking and Declaration of Conformity. (Art. 24)"
  - role_id: "product_manufacturer"
    product_id: "high_risk_annex3"
    key_obligations:
      - "Provider Obligations: Assume provider obligations if marketing under own name. (Art. 25)"
  - role_id: "authorised_representative"
    product_id: "high_risk_annex3"
    key_obligations:
      - "Documentation: Keep docs for 10 years. (Art. 22)"

  # ==========================================
  # 6. HIGH RISK + TRANSPARENCY (ANNEX I)
  # ==========================================
  - role_id: "provider"
    product_id: "high_risk_annex1_transparency"
    key_obligations:
      - "High Risk Obligations: Comply with Art 9-17 (Risk, Data, QMS, etc). (Art. 6)"
      - "AI Disclosure: Design system to inform natural persons they are interacting with AI. (Art. 50(1))"
      - "Content Marking: Mark synthetic output as artificially generated. (Art. 50(2))"
  - role_id: "deployer"
    product_id: "high_risk_annex1_transparency"
    key_obligations:
      - "High Risk Usage: Comply with Art 26 (Oversight, Instructions). (Art. 26)"
      - "Deepfake/Emotion Disclosure: Inform persons exposed to deepfakes or emotion recognition. (Art. 50(3)-(4))"
  - role_id: "importer"
    product_id: "high_risk_annex1_transparency"
    key_obligations:
      - "High Risk Verification: Verify conformity assessment and docs. (Art. 23)"
  - role_id: "distributor"
    product_id: "high_risk_annex1_transparency"
    key_obligations:
      - "High Risk Verification: Verify CE mark and instructions. (Art. 24)"
  - role_id: "product_manufacturer"
    product_id: "high_risk_annex1_transparency"
    key_obligations:
      - "Provider Obligations: Assume provider obligations. (Art. 25)"
  - role_id: "authorised_representative"
    product_id: "high_risk_annex1_transparency"
    key_obligations:
      - "Documentation: Keep docs for 10 years. (Art. 22)"

  # ==========================================
  # 7. HIGH RISK + TRANSPARENCY (ANNEX III)
  # ==========================================
  - role_id: "provider"
    product_id: "high_risk_annex3_transparency"
    key_obligations:
      - "High Risk Obligations: Comply with Art 9-17 (Risk, Data, QMS, etc). (Art. 6)"
      - "AI Disclosure: Inform persons of AI interaction. (Art. 50(1))"
      - "Content Marking: Mark synthetic output. (Art. 50(2))"
  - role_id: "deployer"
    product_id: "high_risk_annex3_transparency"
    key_obligations:
      - "High Risk Usage: Comply with Art 26 (Oversight, Instructions). (Art. 26)"
      - "Deepfake/Emotion Disclosure: Inform persons exposed. (Art. 50(3)-(4))"
  - role_id: "importer"
    product_id: "high_risk_annex3_transparency"
    key_obligations:
      - "High Risk Verification: Verify conformity. (Art. 23)"
  - role_id: "distributor"
    product_id: "high_risk_annex3_transparency"
    key_obligations:
      - "High Risk Verification: Verify CE mark. (Art. 24)"
  - role_id: "product_manufacturer"
    product_id: "high_risk_annex3_transparency"
    key_obligations:
      - "Provider Obligations: Assume provider obligations. (Art. 25)"
  - role_id: "authorised_representative"
    product_id: "high_risk_annex3_transparency"
    key_obligations:
      - "Documentation: Keep docs for 10 years. (Art. 22)"

  # ==========================================
  # 8. LEGACY EXEMPT
  # ==========================================
  - role_id: "provider"
    product_id: "legacy_exempt"
    key_obligations:
      - "Grandfathering: Exempt from Chapter III obligations unless system is significantly changed. (Art. 111)"
  - role_id: "deployer"
    product_id: "legacy_exempt"
    key_obligations:
      - "Grandfathering: Exempt from Art 26 obligations. (Art. 111)"
  - role_id: "importer"
    product_id: "legacy_exempt"
    key_obligations: []
  - role_id: "distributor"
    product_id: "legacy_exempt"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "legacy_exempt"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "legacy_exempt"
    key_obligations: []

  # ==========================================
  # 9. LEGACY EXEMPT + TRANSPARENCY
  # ==========================================
  - role_id: "provider"
    product_id: "legacy_exempt_transparency"
    key_obligations:
      - "Disclosure: Comply with Art 50(1) (AI interaction) and 50(2) (Marking). (Art. 50)"
      - "Note: Exempt from Chapter III (High Risk) obligations. (Art. 111)"
  - role_id: "deployer"
    product_id: "legacy_exempt_transparency"
    key_obligations:
      - "Disclosure: Comply with Art 50(3) (Emotion) and 50(4) (Deepfake). (Art. 50)"
      - "Note: Exempt from Art 26 obligations. (Art. 111)"
  - role_id: "importer"
    product_id: "legacy_exempt_transparency"
    key_obligations: []
  - role_id: "distributor"
    product_id: "legacy_exempt_transparency"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "legacy_exempt_transparency"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "legacy_exempt_transparency"
    key_obligations: []

  # ==========================================
  # 10. TRANSPARENCY OBLIGATIONS ONLY
  # ==========================================
  - role_id: "provider"
    product_id: "transparency_obligations_only"
    key_obligations:
      - "Interaction Disclosure: Inform natural persons they are interacting with AI. (Art. 50(1))"
      - "Synthetic Marking: Mark outputs as artificially generated in machine-readable format. (Art. 50(2))"
  - role_id: "deployer"
    product_id: "transparency_obligations_only"
    key_obligations:
      - "Emotion/Biometric Disclosure: Inform persons exposed to system operation. (Art. 50(3))"
      - "Deep Fake Disclosure: Disclose content is artificially generated/manipulated. (Art. 50(4))"
  - role_id: "importer"
    product_id: "transparency_obligations_only"
    key_obligations: []
  - role_id: "distributor"
    product_id: "transparency_obligations_only"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "transparency_obligations_only"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "transparency_obligations_only"
    key_obligations: []

  # ==========================================
  # 11. REGULATED DEROGATION (NOT HIGH RISK)
  # ==========================================
  - role_id: "provider"
    product_id: "regulated_derogation"
    key_obligations:
      - "Documentation: Document the derogation assessment (Art 6(3)). (Art. 6(3))"
      - "Registration: Register the system in the EU database. (Art. 60)"
  - role_id: "deployer"
    product_id: "regulated_derogation"
    key_obligations: []
  - role_id: "importer"
    product_id: "regulated_derogation"
    key_obligations: []
  - role_id: "distributor"
    product_id: "regulated_derogation"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "regulated_derogation"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "regulated_derogation"
    key_obligations: []

  # ==========================================
  # 12. NON-HIGH RISK DEROGATION + TRANSPARENCY
  # ==========================================
  - role_id: "provider"
    product_id: "non_high_risk_derogation_transparency"
    key_obligations:
      - "Derogation: Document assessment and Register system. (Art. 6(3) / Art 60)"
      - "Transparency: Comply with Art 50(1) and 50(2). (Art. 50)"
  - role_id: "deployer"
    product_id: "non_high_risk_derogation_transparency"
    key_obligations:
      - "Transparency: Comply with Art 50(3) and 50(4). (Art. 50)"
  - role_id: "importer"
    product_id: "non_high_risk_derogation_transparency"
    key_obligations: []
  - role_id: "distributor"
    product_id: "non_high_risk_derogation_transparency"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "non_high_risk_derogation_transparency"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "non_high_risk_derogation_transparency"
    key_obligations: []

  # ==========================================
  # 13. PROHIBITED PRACTICES
  # ==========================================
  - role_id: "provider"
    product_id: "prohibited_ai_practice"
    key_obligations:
      - "Prohibition: Do not place on market. Withdraw if present. (Art. 5)"
  - role_id: "deployer"
    product_id: "prohibited_ai_practice"
    key_obligations:
      - "Prohibition: Do not use the system. (Art. 5)"
  - role_id: "importer"
    product_id: "prohibited_ai_practice"
    key_obligations:
      - "Prohibition: Do not import. (Art. 5)"
  - role_id: "distributor"
    product_id: "prohibited_ai_practice"
    key_obligations:
      - "Prohibition: Do not make available. (Art. 5)"
  - role_id: "product_manufacturer"
    product_id: "prohibited_ai_practice"
    key_obligations:
      - "Prohibition: Do not integrate into product. (Art. 5)"
  - role_id: "authorised_representative"
    product_id: "prohibited_ai_practice"
    key_obligations: []

  # ==========================================
  # 14. MINIMAL RISK (STANDARD & OPEN SOURCE)
  # ==========================================
  - role_id: "provider"
    product_id: "minimal_risk_standard"
    key_obligations:
      - "AI Literacy: Ensure staff competence. (Art. 4)"
      - "Voluntary Codes: Encouraged to apply codes of conduct. (Art. 69)"
  - role_id: "deployer"
    product_id: "minimal_risk_standard"
    key_obligations:
      - "AI Literacy: Ensure staff competence. (Art. 4)"
  - role_id: "importer"
    product_id: "minimal_risk_standard"
    key_obligations: []
  - role_id: "distributor"
    product_id: "minimal_risk_standard"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "minimal_risk_standard"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "minimal_risk_standard"
    key_obligations: []

  - role_id: "provider"
    product_id: "minimal_risk_opensource"
    key_obligations: []
  - role_id: "deployer"
    product_id: "minimal_risk_opensource"
    key_obligations: []
  - role_id: "importer"
    product_id: "minimal_risk_opensource"
    key_obligations: []
  - role_id: "distributor"
    product_id: "minimal_risk_opensource"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "minimal_risk_opensource"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "minimal_risk_opensource"
    key_obligations: []

  # ==========================================
  # 15. EXCLUDED CATEGORIES
  # ==========================================
  - role_id: "provider"
    product_id: "excluded_scientific_rd"
    key_obligations: []
  - role_id: "deployer"
    product_id: "excluded_scientific_rd"
    key_obligations: []
  - role_id: "importer"
    product_id: "excluded_scientific_rd"
    key_obligations: []
  - role_id: "distributor"
    product_id: "excluded_scientific_rd"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "excluded_scientific_rd"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "excluded_scientific_rd"
    key_obligations: []

  - role_id: "provider"
    product_id: "excluded_pre_market_rd"
    key_obligations: []
  - role_id: "deployer"
    product_id: "excluded_pre_market_rd"
    key_obligations: []
  - role_id: "importer"
    product_id: "excluded_pre_market_rd"
    key_obligations: []
  - role_id: "distributor"
    product_id: "excluded_pre_market_rd"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "excluded_pre_market_rd"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "excluded_pre_market_rd"
    key_obligations: []

  - role_id: "provider"
    product_id: "excluded_specific_exclusion"
    key_obligations: []
  - role_id: "deployer"
    product_id: "excluded_specific_exclusion"
    key_obligations: []
  - role_id: "importer"
    product_id: "excluded_specific_exclusion"
    key_obligations: []
  - role_id: "distributor"
    product_id: "excluded_specific_exclusion"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "excluded_specific_exclusion"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "excluded_specific_exclusion"
    key_obligations: []

  - role_id: "provider"
    product_id: "excluded_personal_deployer"
    key_obligations: []
  - role_id: "deployer"
    product_id: "excluded_personal_deployer"
    key_obligations: []
  - role_id: "importer"
    product_id: "excluded_personal_deployer"
    key_obligations: []
  - role_id: "distributor"
    product_id: "excluded_personal_deployer"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "excluded_personal_deployer"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "excluded_personal_deployer"
    key_obligations: []

  - role_id: "provider"
    product_id: "excluded_not_ai"
    key_obligations: []
  - role_id: "deployer"
    product_id: "excluded_not_ai"
    key_obligations: []
  - role_id: "importer"
    product_id: "excluded_not_ai"
    key_obligations: []
  - role_id: "distributor"
    product_id: "excluded_not_ai"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "excluded_not_ai"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "excluded_not_ai"
    key_obligations: []

  # ==========================================
  # 16. REGULATED REAL WORLD TESTING
  # ==========================================
  - role_id: "provider"
    product_id: "regulated_real_world_testing"
    key_obligations:
      - "Testing Plan: Submit a real-world testing plan to the market surveillance authority. (Art. 60)"
      - "Informed Consent: Obtain informed consent from subjects participating in testing. (Art. 60)"
      - "Registration: Register the testing in the EU database. (Art. 60)"
  - role_id: "deployer"
    product_id: "regulated_real_world_testing"
    key_obligations:
      - "Cooperation: Cooperate with provider in the testing plan execution. (Art. 60)"
  - role_id: "importer"
    product_id: "regulated_real_world_testing"
    key_obligations: []
  - role_id: "distributor"
    product_id: "regulated_real_world_testing"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "regulated_real_world_testing"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "regulated_real_world_testing"
    key_obligations: []

  # ==========================================
  # 17. EXCLUDED OPEN SOURCE DEROGATION
  # ==========================================
  - role_id: "provider"
    product_id: "excluded_open_source_ai_system_derogation"
    key_obligations: []
  - role_id: "deployer"
    product_id: "excluded_open_source_ai_system_derogation"
    key_obligations: []
  - role_id: "importer"
    product_id: "excluded_open_source_ai_system_derogation"
    key_obligations: []
  - role_id: "distributor"
    product_id: "excluded_open_source_ai_system_derogation"
    key_obligations: []
  - role_id: "product_manufacturer"
    product_id: "excluded_open_source_ai_system_derogation"
    key_obligations: []
  - role_id: "authorised_representative"
    product_id: "excluded_open_source_ai_system_derogation"
    key_obligations: []